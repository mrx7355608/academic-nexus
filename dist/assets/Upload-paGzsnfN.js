import{G as U,r as a,z as j,q as v,j as e,F as p,B as w,s as S,v as g,I as h,S as A}from"./index-B1y43jki.js";import{F as x,S as C,U as I,P as F}from"./UploadType-qeBezV3-.js";import{P}from"./PageHeading-D4ETN6fO.js";import{c as z}from"./assessment.services-Cb0npOB5.js";import"./index-gqd0mSxK.js";import"./chunk-Z3VR2BFQ-dVoWUn2q.js";import"./chunk-AXLEE3EK-C7fciNlA.js";import"./chunk-ROURZMX4-Cb0dCQiP.js";import"./chunk-RDF2AYID-BOBrOvfI.js";import"./index-DdrsuNi1.js";import"./chunk-W7WUSNWJ-Dqrv5SI-.js";function R(n){return U({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"circle",attr:{cx:"256",cy:"272",r:"64"},child:[]},{tag:"path",attr:{d:"M456 144h-83c-3 0-6.72-1.94-9.62-5L336.1 96.2C325 80 320 80 302 80h-92c-18 0-24 0-34.07 16.21L148.62 139c-2.22 2.42-5.34 5-8.62 5v-16a8 8 0 0 0-8-8H92a8 8 0 0 0-8 8v16H56a24 24 0 0 0-24 24v240a24 24 0 0 0 24 24h400a24 24 0 0 0 24-24V168a24 24 0 0 0-24-24zM260.51 367.9a96 96 0 1 1 91.39-91.39 96.11 96.11 0 0 1-91.39 91.39z"},child:[]}]})(n)}const T=a.memo(function({setAssessment:u}){const o=a.useRef(),r=a.useRef(),[c,d]=a.useState(!1),{showInfoToast:t,showSuccessToast:l}=j(),{colorMode:i}=v();return a.useEffect(()=>{o.current=window.cloudinary,r.current=o.current.createUploadWidget({cloudName:"doemiclic",uploadPreset:"academic-nexus",maxFileSize:2097152,accept:"application/pdf, image/jpeg, image/png, application/vnd.openxmlformats-officedocument.wordprocessingml.document, image/jpg",multiple:!1,maxFiles:1},function(m,s){if(s.event==="success"){l("File uploaded successfully"),d(!0);const f=s.info.path.split("."),y=s.info.format||f[f.length-1];u(b=>({...b,fileURL:s.info.secure_url,fileExtension:y,publicId:s.info.public_id}))}})},[]),e.jsx(p,{justifyContent:"center",alignItems:"center",w:"full",minH:"200px",bg:i==="light"?"#d7d7d7":"gray.700",rounded:"lg",_hover:{bg:i==="light"?"gray.300":"gray.600",cursor:"pointer"},onClick:()=>{c?t("You have already uploaded a file"):r.current.open()},children:e.jsx(w,{variant:"ghost",_hover:{bg:"transparent"},size:"lg",leftIcon:e.jsx(R,{size:26}),children:c?"File uploaded":"Upload File"})})});function Y(){const{colorMode:n}=v(),u=S(),{showErrorToast:o,showSuccessToast:r}=j(),[c,d]=a.useState(!1),[t,l]=a.useState({title:"",fileURL:"",subject:"",publicId:"",isPublic:!0,type:"quiz",fileExtension:"",password:""}),i=a.useCallback(s=>{l(s)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(p,{alignItems:"center",gap:"5",mb:12,children:e.jsx(P,{title:"Upload"})}),e.jsxs(p,{flexDirection:"column",alignItems:"start",justifyContent:"center",gap:9,maxW:"500px",mx:"auto",children:[e.jsxs(g,{w:"full",children:[e.jsx(x,{children:"Title:"}),e.jsx(h,{placeholder:"Title",bg:n==="light"?"#d7d7d7":"gray.700",onChange:s=>{l({...t,title:s.target.value})}})]}),e.jsx(C,{setAssessment:i}),e.jsx(I,{setAssessment:i}),e.jsx(F,{setAssessment:i}),e.jsxs(g,{w:"full",children:[e.jsx(x,{children:"Password:"}),e.jsx(h,{placeholder:"Password",type:"password",bg:n==="light"?"#d7d7d7":"gray.700",onChange:s=>{l({...t,password:s.target.value})}})]}),e.jsx(T,{setAssessment:i}),e.jsx(w,{w:"full",colorScheme:"purple",onClick:m,children:c?e.jsx(A,{}):"Upload Assessment"})]})]});async function m(){if(t.subject)if(t.fileURL){if(!t.title)return o("Assessment must have a title")}else return o("You must add a file in order to upload assessment");else return o("Assessment must have a subject");d(!0);const{error:s}=await z(t);s?o(s):(r("Assessment uploaded successfully"),u("/")),d(!1)}}export{Y as default};
