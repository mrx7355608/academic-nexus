import{Z as f,z as j,r as d,j as s,B as x,L as h,q as p,C as y,v as w,F as l,T as o,$ as A,S as b}from"./index--WTcuLUy.js";import{I as z}from"./index-YhYeChE2.js";import{H as C,D as v}from"./DownloadModal-CqqUZl8B.js";import{a as S}from"./assessment.services-CeXVm2XV.js";import{M,a as D,b as I,c}from"./chunk-Z3VR2BFQ-BlbWoB5E.js";import{u as E}from"./useFetch-Cc7htHJd.js";const W=f(e=>({assessments:[],setAssessments:n=>e({assessments:n}),removeAssessment:n=>e(t=>({assessments:t.assessments.filter(r=>r._id!==n)}))})),g=W;function _({id:e}){const{showErrorToast:n,showSuccessToast:t}=j(),{removeAssessment:r}=g(),[i,m]=d.useState(!1);return s.jsxs(M,{children:[s.jsx(D,{as:x,size:"sm",variant:"ghost",rounded:"full",px:1,pl:2,children:s.jsx(C,{size:17})}),s.jsxs(I,{children:[s.jsx(h,{to:`/edit/${e}`,children:s.jsx(c,{children:"Edit"})}),s.jsx(c,{children:"Change password"}),s.jsx(c,{textColor:"red.400",onClick:u,children:i?"Deleting...":"Delete"})]})]});async function u(){m(!0);const{error:a}=await S(e);if(a)return n(a);r(e),t("Assessment has been deleted"),m(!1)}}function $({data:e,setAssessment:n}){const{colorMode:t}=p(),r=y(i=>i.user);return s.jsxs(w,{p:4,borderRadius:"md",flex:"1",minW:"350px",maxW:"370px",children:[s.jsx(l,{justifyContent:"center",alignItems:"center",h:"130px",bg:t==="light"?"#d7d7d7":"gray.700",rounded:"md",children:s.jsx(o,{fontSize:"xl",fontWeight:"bold",children:e.fileExtension.toUpperCase()})}),s.jsxs(l,{justifyContent:"space-between",alignItems:"center",mt:2,children:[s.jsx(o,{fontSize:"xs",fontWeight:"medium",borderWidth:1,borderColor:"gray.500",px:2,py:.5,w:"max-content",color:t==="light"?"gray.700":"gray.400",children:e.subject}),(r==null?void 0:r._id)===e.author._id&&s.jsx(_,{id:e._id,setAssessment:n})]}),s.jsx(o,{fontWeight:600,fontSize:"md",mt:"2",color:t==="light"?"gray.700":"gray.100",children:e.title}),s.jsxs(o,{fontSize:"sm",color:t==="light"?"gray.600":"gray.400",mt:.5,children:["Posted by"," ",s.jsx(o,{as:"span",textDecor:"underline",children:e.author.fullname})," ","- ",new Date(e.createdAt).toDateString().slice(4)]}),s.jsxs(l,{mt:2,fontSize:"sm",mb:1,color:t==="light"?"gray.600":"gray.400",gap:2,children:[s.jsx(A,{size:20}),s.jsx(o,{ml:"1",as:"span",color:e.upvotes.length-e.downvotes.length>0?"green":e.upvotes.length-e.downvotes.length<0?"red":"gray",children:e.upvotes.length-e.downvotes.length}),s.jsxs(o,{ml:2,fontSize:"sm",fontWeight:"medium",px:3,py:.5,w:"max-content",rounded:"full",color:t==="light"?"gray.700":"gray.400",bg:t==="dark"?"gray.700":"#d7d7d7",children:["#",e.type]})]}),s.jsxs(l,{mt:3,gap:2,alignItems:"center",justifyContent:"start",children:[s.jsx(h,{to:`/assessment/${e._id}`,children:s.jsx(x,{px:2,size:"sm",textDecor:"underline",variant:"ghost",color:t==="light"?"gray.700":"gray.300",leftIcon:s.jsx(z,{size:20,style:{marginRight:"-2px"}}),children:"View"})}),s.jsx(v,{id:e._id,fileName:`${e.title}.${e.fileExtension}`})]})]})}function F({assessments:e}){const{assessments:n,setAssessments:t}=g();return d.useEffect(()=>{e&&t(e)},[e]),s.jsx(l,{flexWrap:"wrap",gap:4,mb:20,children:n.length>0?n.map(r=>s.jsx($,{data:r},r._id)):s.jsx(o,{mt:5,children:"Nothing to show"})})}function V({endpoint:e,credentials:n=!1}){const{loading:t,result:r,error:i}=E(e,n);return s.jsx(s.Fragment,{children:t?s.jsx(l,{alignItems:"center",justifyContent:"center",h:"200px",children:s.jsx(b,{})}):i?s.jsx(o,{mt:5,color:"red.400",children:i}):s.jsx(F,{assessments:r})})}export{V as A};
