import{Z as g,z as u,r as j,j as e,B as d,L as x,q as f,C as p,v as y,F as i,T as r,$ as w,S as b}from"./index-doEF5yPY.js";import{I as A}from"./index-J-Qndv_Y.js";import{H as z,D as C}from"./DownloadModal-BQ84qg4S.js";import{a as v}from"./assessment.services-Cb0npOB5.js";import{M as S,a as M,b as D,c as a}from"./chunk-Z3VR2BFQ-BKWIcuHr.js";import{u as I}from"./useFetch-lkPhgvES.js";const W=g(s=>({assessments:[],setAssessments:t=>s({assessments:t}),removeAssessment:t=>s(n=>({assessments:n.assessments.filter(o=>o._id!==t)}))})),E=W;function _({id:s}){const{showErrorToast:t,showSuccessToast:n}=u(),{removeAssessment:o}=E(),[l,c]=j.useState(!1);return e.jsxs(S,{children:[e.jsx(M,{as:d,size:"sm",variant:"ghost",rounded:"full",px:1,pl:2,children:e.jsx(z,{size:17})}),e.jsxs(D,{children:[e.jsx(x,{to:`/edit/${s}`,children:e.jsx(a,{children:"Edit"})}),e.jsx(a,{children:"Change password"}),e.jsx(a,{textColor:"red.400",onClick:h,children:l?"Deleting...":"Delete"})]})]});async function h(){c(!0);const{error:m}=await v(s);if(m)return t(m);o(s),n("Assessment has been deleted"),c(!1)}}function $({data:s}){const{colorMode:t}=f(),n=p(o=>o.user);return e.jsxs(y,{p:4,borderRadius:"md",flex:"1",minW:"350px",maxW:"370px",children:[e.jsx(i,{justifyContent:"center",alignItems:"center",h:"130px",bg:t==="light"?"#d7d7d7":"gray.700",rounded:"md",children:e.jsx(r,{fontSize:"xl",fontWeight:"bold",children:s.fileExtension.toUpperCase()})}),e.jsxs(i,{justifyContent:"space-between",alignItems:"center",mt:2,children:[e.jsx(r,{fontSize:"xs",fontWeight:"medium",borderWidth:1,borderColor:"gray.500",px:2,py:.5,w:"max-content",color:t==="light"?"gray.700":"gray.400",children:s.subject}),(n==null?void 0:n._id)===s.author._id&&e.jsx(_,{id:s._id})]}),e.jsx(r,{fontWeight:600,fontSize:"md",mt:"2",color:t==="light"?"gray.700":"gray.100",children:s.title}),e.jsxs(r,{fontSize:"sm",color:t==="light"?"gray.600":"gray.400",mt:.5,children:["Posted by"," ",e.jsx(r,{as:"span",textDecor:"underline",children:s.author.fullname})," ","- ",new Date(s.createdAt).toDateString().slice(4)]}),e.jsxs(i,{mt:2,fontSize:"sm",mb:1,color:t==="light"?"gray.600":"gray.400",gap:2,children:[e.jsx(w,{size:20}),e.jsx(r,{ml:"1",as:"span",color:s.upvotes.length-s.downvotes.length>0?"green":s.upvotes.length-s.downvotes.length<0?"red":"gray",children:s.upvotes.length-s.downvotes.length}),e.jsxs(r,{ml:2,fontSize:"sm",fontWeight:"medium",px:3,py:.5,w:"max-content",rounded:"full",color:t==="light"?"gray.700":"gray.400",bg:t==="dark"?"gray.700":"#d7d7d7",children:["#",s.type]})]}),e.jsxs(i,{mt:3,gap:2,alignItems:"center",justifyContent:"start",children:[e.jsx(x,{to:`/assessment/${s._id}`,children:e.jsx(d,{px:2,size:"sm",textDecor:"underline",variant:"ghost",color:t==="light"?"gray.700":"gray.300",leftIcon:e.jsx(A,{size:20,style:{marginRight:"-2px"}}),children:"View"})}),e.jsx(C,{id:s._id,fileName:`${s.title}.${s.fileExtension}`})]})]})}function F({assessments:s}){return e.jsx(i,{flexWrap:"wrap",gap:4,mb:20,children:s.length>0?s.map(t=>e.jsx($,{data:t},t._id)):e.jsx(r,{mt:5,children:"Nothing to show"})})}function V({endpoint:s,credentials:t=!1}){const{loading:n,result:o,error:l}=I(s,t);return e.jsx(e.Fragment,{children:n?e.jsx(i,{alignItems:"center",justifyContent:"center",h:"200px",children:e.jsx(b,{})}):l?e.jsx(r,{mt:5,color:"red.400",children:l}):e.jsx(F,{assessments:o})})}export{V as A};
